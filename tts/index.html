<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text to Speech – RF Online Tools</title>

<style>
    body { background:#0f0f0f; color:white; font-family:"Inter",sans-serif; display:flex; flex-direction:column; align-items:center; padding:40px; }
    h1 { font-size:2.5rem; background:linear-gradient(90deg,#00eaff,#008cff); -webkit-background-clip:text; color:transparent; }
    .box { width:100%; max-width:650px; padding:25px; background:rgba(255,255,255,0.05); border-radius:18px; }
    textarea { width:100%; height:180px; padding:15px; border-radius:12px; background:rgba(255,255,255,0.08); color:white; border:none; resize:none; outline:none; }
    select, button { width:100%; margin-top:15px; padding:14px; border-radius:12px; border:none; }
    button { background:linear-gradient(90deg,#00eaff,#008cff); font-weight:700; cursor:pointer; color:black; }
    audio { margin-top:20px; width:100%; }
</style>
</head>

<body>

<h1>Text to Speech</h1>
<p>Type → Speak → Download MP3</p>

<div class="box">
    <textarea id="ttsText" placeholder="Type here..."></textarea>

    <select id="voiceSelect">
        <option value="alloy">Alloy (Male)</option>
        <option value="verse">Verse (Female)</option>
        <option value="impact">Impact (Deep)</option>
    </select>

    <button onclick="generateAudio()">Generate Audio</button>
    <button onclick="downloadAudio()">Download MP3</button>

    <audio id="audioPlayer" controls style="display:none;"></audio>
</div>

<script>
let audioBlob = null;

// Generate audio using OpenAI FREE browser TTS
async function generateAudio() {
    const text = document.getElementById("ttsText").value.trim();
    const voice = document.getElementById("voiceSelect").value;
    if (!text) return alert("Enter text!");

    const response = await fetch("https://api.openai.com/v1/audio/speech", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            model: "gpt-4o-mini-tts",
            input: text,
            voice: voice,
            format: "mp3"
        })
    });

    const arrayBuffer = await response.arrayBuffer();
    audioBlob = new Blob([arrayBuffer], { type: "audio/mp3" });

    const audio = document.getElementById("audioPlayer");
    audio.style.display = "block";
    audio.src = URL.createObjectURL(audioBlob);
}

// Download the MP3
function downloadAudio() {
    if (!audioBlob) return alert("Generate audio first!");

    const url = URL.createObjectURL(audioBlob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "tts.mp3";
    a.click();
}
</script>

</body>
</html>
